<!DOCTYPE html>
<html lang="en-us">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width initial-scale=1">

  <title>
      
      Hack The Planet - iPhone Programming
      
  </title>

  <meta name="description" content="this is meta :)">

  <link rel="shortcut icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>%f0%9f%a6%a0</text></svg>">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/custom.css">
  <link rel="canonical" href="https://brandontreb.ngrok.io/tags/iphone-programming/">

	<link rel="me" href="https://brandontreb.ngrok.io" />
	
	
	
	<link rel="authorization_endpoint" href="/indieauth/auth" />
	<link rel="token_endpoint" href="/indieauth/token" />
	<link rel="micropub" href="https://brandontreb.ngrok.io/micropub" />
	<link rel="microsub" href="https://brandontreb.ngrok.io/microsub" />
	<link rel="webmention" href="https://brandontreb.ngrok.io/webmention" />	
  
  
  
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Hack The Planet</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
		
			
				<a class="page-link" href="/archive/">Archive</a>
			
		
			
				<a class="page-link" href="/photos/">Photos</a>
			
		
			
				<a class="page-link" href="/replies/">Replies</a>
			
		
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
		
<div class="home h-feed">

  <ul class="post-list">
	
	
      <li class="h-entry">
		
			<h1><a href="https://brandontreb.ngrok.io/2014/01/01/learned-first-year-ios-consulting/">What I Learned In My First Year Of iOS Consulting</a></h1>
		

        <a href="https://brandontreb.ngrok.io/2014/01/01/learned-first-year-ios-consulting/" class="u-url"><span class="post-meta"><time class="dt-published" datetime="2014-01-01 01:00:00 -0600">Jan 1, 2014</time></span></a>

        <div class="e-content">
         	<p>Wow, I can’t believe it has already been a full year since I struck it out on my own.  Last year, I <a href="http://brandontreb.com/what-i-learned-in-my-first-month-being-a-contract-ios-developer">published a post</a> after my first month on doing contract iOS development.  Needless to say, I have grown and learned quite a bit over the past year and I wanted to share some of those experiences.</p>
<h3 id="income">Income</h3>
<p>While I won’t share exact numbers, I left my 6 figure/year job to pursue the indie/consulting life.  During the course of the year, I was able to amass 40% more income in 2013 than I had at my previous position.</p>
<p>In addition to that, I had the time to launch a couple iOS applications and thus upping my Apple income by about 20% this year.</p>
<h3 id="network-network-network">Network Network Network</h3>
<p>I would say spending time networking and meeting people is just as important as being able to write code if you want to be successful on your own.  Through out the year, I dedicated at least five to ten hours a week just meeting with people, talking on the phone, and making new connections.</p>
<p>Often times, I would get contract opportunities that I knew for sure that I wasn’t going to take; either because I didn’t love the project, or (more often than not) because I didn’t have the bandwidth to take them on.  However, rather than just writing the client back “<em>I don’t have time</em>“, I would take the call (or meeting in town), make the connection, and even listen to details about the contract.</p>
<p>My wife would tell me to stop wasting my time and that those hours would be better spent on project work that actually made money.  However, these contacts are arguably <strong>more</strong> valuable than the hours “lost”.  In many situations, I have reached out to those potential clients weeks or months later once I hired a new developer and was then able signed a contract.  If I had declined the meeting to begin with, they probably wouldn’t have been as inclined to work with me so readily.</p>
<h3 id="subcontractors"><strong>Subcontractors</strong></h3>
<p>Subcontracting has been a mixed bag for me.  It seems to be the only (safe-ish) way to expand your business as a consultant, other than hiring full time developers.  So, if you want to be able to work less yourself (which is almost never the case) or increase your companies revenue, you need to hire out.  </p>
<p>Once I found the right people, subcontracting was a dream.  I was able to reach more clients, still deliver the same value in the work, and achieve the client’s goals, all while expanding my business.</p>
<p>The main challenge I have had is deciding whether to hire subcontractors from here in the states or “offshore”.  They both have their benefits and complications. Here are some I have found:</p>
<p><strong>Benefits of hiring in the states:</strong></p>
<ul>
<li>Communication – Most of the time their timezones are close enough that one of you is not inconvenienced to communicate in real time.</li>
<li>Trust From Clients – Some clients still have some issues with “offshore”, especially because many of them have tried their hand at the ODesk lottery and have lost.  So, saying you have US based team members sometimes makes them more comfortable. It’s unfortunate, but I have seen it to be true in some cases.</li>
<li>Colleagues – Often times you already know or have worked with these guys since starting with acquaintances/friends is a good place to look for developers.</li>
</ul>
<p><strong>Complications hiring in the states</strong></p>
<ul>
<li>Cost – US devs are expensive.  Most of the time they have full time jobs and want to do consulting on the side.  So it is important that they get paid more to do contract work than their day job pays.</li>
<li>Colleagues – This is on the negative list as well because hiring people you know can get weird if things go awry.</li>
</ul>
<p>**Benefit of Offshore developers **</p>
<ul>
<li>Cost – I put this here, however that doesn’t mean I hire “cheap” developers.  Honestly, if you are not paying a contractor well, you are either under paying him and should give him a raise OR he shouldn’t be working for you as he’s probably too junior.</li>
<li>Perspective – I have some incredible developers in other countries that have taught me quite a bit whether it’s about development, process, culture, or even my own code.  It’s a great opportunity to learn.</li>
</ul>
<p>**Problems with Offshore developers **</p>
<ul>
<li>Location – Timezone issues <em>can</em> be a problem if you let them.  For example, I have a developer who lives in a completely different timezone than my own.  However, he does a fantastic job of being available when he is needed.  I have had other instances where it was very challenging to reach my developer in an event where I needed information on short notice.</li>
<li>Vetting Process – Finding developers is a little more tricky.  With devs in the states, you can just head to a local meet up or conference, but finding GOOD “offshore” devs is a little trickier.  I have lucked out a few times, but for the most part it’s a bit more work.  I would suggest spending a little of your own money to adequately search and vet each candidate.</li>
<li>Language – While doing iOS development, you may need your client and your developer to communicate with one another.  That being said, it’s vital to find a developer who <em>you</em> can understand and who can understand you in order to make communication possible.</li>
</ul>
<h3 id="hiring-an-assistant">Hiring An Assistant</h3>
<p>Taking a page from Tim Ferris’ <em>4 Hour Work Week</em>, I decided to hire an assistant.  Ferris suggests “virtual”, however, I have hired one locally (she’ll be proofreading this post 😉 ).  I think it’s one of the best decisions I have made as a business owner.  Here is just a short list of things she handles for me:</p>
<ul>
<li>Contracts</li>
<li>Invoicing</li>
<li>Payments of contractors</li>
<li>Research</li>
<li>Phone calls</li>
<li>Personal issues (like returns, purchasing equipment, etc.)</li>
</ul>
<p>Even if she saves me two hours per week, she has paid for herself, and believe me, she saves me much more than that.</p>
<h3 id="never-decline-a-contract">Never Decline A Contract</h3>
<p>I mentioned this earlier in the post, but I want to reiterate it here.  I seldom tell clients “no” and I really feel that it has worked out to my benefit.  At the very least, I hear them out and add them as a contact to keep in mind for the future.</p>
<p>What I generally do when I can’t take on a client is I will give them an estimate of when myself or a member of my team will be available.  That way, if they are okay with the timeline, I can keep the pipeline open.  If not, there is no harm done.  Also, if I hire another developer before the time I said I was available, sometimes the client will still have the need and I am able to fill it.</p>
<p>If I absolutely don’t have time or don’t want a particular contract, I will refer the client out to other dev shops.  I don’t look at this as competition, but rather opportunity as I would hope they would do the same for me one day.  As an added bonus, some of them have a referral fee so you can at least profit from pairing the client up.</p>
<h3 id="taxes">Taxes</h3>
<p>I have found out that taxes are less fun when you are self-employed than when you are employed by a business.  Luckily my wife is MUCH better at money management than I am, so she set up a separate tax account where roughly 40% of our income would go.</p>
<p>One of the other good decisions I made besides hiring an assistant was hiring a CPA.  She has saved me countless hours and fees and is worth her weight in gold.</p>
<p>Hire a CPA from day one; you will never regret it.</p>
<h3 id="family">Family</h3>
<p>I know this is a “business” related post, but I have to mention this.  Having a wife and kids, I am very much a family man.  Working for myself has been such a blessing since I have been able to spend considerably more time with my family than when I was employed by someone else.</p>
<p>For example, if it’s a nice summer day and the family decides to head to the zoo, I can just go without asking a boss for time off or taking PTO.  I simply work in the evening or more hours the next day to recoup the time.  Personal time management is key to be able to have this kind of freedom.</p>
<h3 id="summary">Summary</h3>
<p>Overall, 2013 was an incredible year.  While I did make mistakes (a ton), I gained so much knowledge and had a blast doing so.  Going solo isn’t for everyone (some days I wonder why everyone** isn’t** doing it, and others I wonder why I <strong>am</strong>), but it’s been one of the most exciting experiences of my life.</p>
<p>I look forward to what 2014 brings and seeing how I can continue to grow my consultancy.</p>
<p>Happy New Year and Happy Hacking!</p>
<p><a href="http://twitter.com/share">Tweet</a></p>

        </div>
      </li>
    
      <li class="h-entry">
		
			<h1><a href="https://brandontreb.ngrok.io/2013/08/15/iphone-programming-tutorial-creating-an-image-gallery-like-over-part-2/">iPhone Programming Tutorial: Creating An Image Gallery Like Over &amp;#8211; Part 2</a></h1>
		

        <a href="https://brandontreb.ngrok.io/2013/08/15/iphone-programming-tutorial-creating-an-image-gallery-like-over-part-2/" class="u-url"><span class="post-meta"><time class="dt-published" datetime="2013-08-15 00:00:00 -0600">Aug 15, 2013</time></span></a>

        <div class="e-content">
         	<p><a href="/uploads/2013/Screen-Shot-2013-08-09-at-8.36.42-PM.png"><img src="/uploads/2013/Screen-Shot-2013-08-09-at-8.36.42-PM.png" alt="Screen Shot 2013-08-09 at 8.36.42 PM"></a></p>
<p> </p>
<p>Welcome to the second part of my tutorial series “<strong>Creating An Image Gallery Like Over”.</strong>  In this part of the tutorial, you will learn how to actually display the photos in the UICollectionView as well as give the user the ability to take photos with their camera.</p>
<p>If you haven’t already done so, please go back and <a href="http://brandontreb.com/iphone-programming-tutorial-creating-an-image-gallery-like-over-part-1">complete part 1</a>.</p>
<h3 id="1-custom-uicollectionviewcell">1. Custom UICollectionViewCell</h3>
<p>Start by creating a new subclass of <strong>UICollectionViewCell</strong> and naming it **PhotoCell.  **Now, open up PhotoCell.h and add the following code:</p>
<table>
<thead>
<tr>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
</tr>
</tbody>
</table>
<pre tabindex="0"><code>#import &lt;AssetsLibrary/AssetsLibrary.h&gt;
 
@interface PhotoCell : UICollectionViewCell
@property(nonatomic, strong) ALAsset \*asset;
@end
</code></pre><p>|</p>
<p>Now, open PhotoCell.m and add the following code:</p>
<table>
<thead>
<tr>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
</tr>
</tbody>
</table>
<pre tabindex="0"><code>#import &#34;PhotoCell.h&#34;
 
@interface PhotoCell ()
// 1
@property(nonatomic, weak) IBOutlet UIImageView \*photoImageView;
@end
 
@implementation PhotoCell
- (void) setAsset:(ALAsset \*)asset
{
    // 2
    _asset = asset;
    self.photoImageView.image = [UIImage imageWithCGImage:[asset thumbnail]];
}
@end
</code></pre><p>|</p>
<ol>
<li>This is an **IBOutlet **to a <strong>UIImageView</strong> that we will create inside of the Storyboard</li>
<li>We overwrite the setter method for the asset in order to convert the asset’s thumbnail into a UIImage and set it to the contents of the UIImageView</li>
</ol>
<p>Now that we have the custom cell created, we need to hook it up and create the UIImageView inside of Storyboard.  Open **MainStoryboard.storyboard **and click on the default <strong>UICollectionViewCell</strong> inside of your <strong>UICollectionView.</strong></p>
<p>It might be tricky to see the cell as it has a white background and blends in, but it’s there.</p>
<p><a href="http://brandontreb.com/wp-content/uploads/2013/07/Screen-Shot-2013-07-24-at-6.43.38-PM.png"><img src="/uploads/2013/Screen-Shot-2013-07-24-at-6.43.38-PM-300x281.png" alt="Screen Shot 2013-07-24 at 6.43.38 PM"></a></p>
<p>Now, click on the <strong>Identity Inspector</strong> from the right side bar and change the class to <strong>PhotoCell.</strong>  This will inform interface builder that this object is of the type PhotoCell and let us hook up the photoImageView outlet.</p>
<p><a href="/uploads/2013/Screen-Shot-2013-07-24-at-6.46.35-PM.png"><img src="/uploads/2013/Screen-Shot-2013-07-24-at-6.46.35-PM.png" alt="Screen Shot 2013-07-24 at 6.46.35 PM"></a></p>
<p>Next, open the size inspector, change the size to **Custom, **the width to **104 **and the height to <strong>104.</strong>  This will give us nice sized images, with a good amount of padding between them.</p>
<p><a href="/uploads/2013/Screen-Shot-2013-07-24-at-6.49.51-PM.png"><img src="/uploads/2013/Screen-Shot-2013-07-24-at-6.49.51-PM.png" alt="Screen Shot 2013-07-24 at 6.49.51 PM"></a></p>
<p>The <strong>UICollectionView</strong> will overwrite these sizes, so we need to change it in one other location.  To ensure that the cells stay the correct size, click on the <strong>Collection View</strong> in left side bar and open it’s <strong>Size Inspector</strong>.  Then set the <strong>Cell Size</strong> width and height to 104.</p>
<p><a href="/uploads/2013/Screen-Shot-2013-07-24-at-7.07.14-PM.png"><img src="/uploads/2013/Screen-Shot-2013-07-24-at-7.07.14-PM.png" alt="Screen Shot 2013-07-24 at 7.07.14 PM"></a></p>
<p>The final step here is to drag a <strong>UIImageView</strong> on to your cell (scaling it to fit the entire cell size), and hook up the <strong>IBOutlet</strong> to the photoImageView. Do this by control-click and dragging from Photo Cell to the ImageView and selecting <strong>photoImageView</strong>.</p>
<p><a href="http://brandontreb.com/wp-content/uploads/2013/07/Screen-Shot-2013-07-24-at-6.52.32-PM.png"><img src="/uploads/2013/Screen-Shot-2013-07-24-at-6.52.32-PM-300x147.png" alt="Screen Shot 2013-07-24 at 6.52.32 PM"></a></p>
<p>If you build and run at this stage, nothing will be different.  That’s because we still need to tell the ViewController class about our new <strong>PhotoCell</strong>.  Open **ViewController.m **and import <strong>PhotoCell.h</strong>.</p>
<table>
<thead>
<tr>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
</tr>
</tbody>
</table>
<pre tabindex="0"><code>#import &#34;PhotoCell.h&#34;
</code></pre><p>|</p>
<p>Now, head down to the <strong>collectionView:cellForItemAtIndexPath</strong> method and replace the contents of it with the following code:</p>
<table>
<thead>
<tr>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
</tr>
</tbody>
</table>
<pre tabindex="0"><code>- (UICollectionViewCell \*) collectionView:(UICollectionView \*)collectionView cellForItemAtIndexPath:(NSIndexPath \*)indexPath
{
    PhotoCell \*cell = (PhotoCell \*)[collectionView dequeueReusableCellWithReuseIdentifier:@&#34;PhotoCell&#34; forIndexPath:indexPath];
 
    ALAsset \*asset = self.assets[indexPath.row];
    cell.asset = asset;
    cell.backgroundColor = [UIColor redColor];
 
    return cell;
}
</code></pre><p>|</p>
<p>What’s changed here is, we are now telling the <strong>UICollectionView</strong> that the cell it’s returning is of the type <strong>PhotoCell</strong>. Also, we are fetching the <strong>ALAsset</strong> out of our array at each index and sending it to the cell so that it can display it’s thumbnail.</p>
<p><strong>Build And Run!</strong></p>
<p><a href="http://brandontreb.com/wp-content/uploads/2013/07/Screen-Shot-2013-07-24-at-7.10.39-PM.png"><img src="/uploads/2013/Screen-Shot-2013-07-24-at-7.10.39-PM-184x300.png" alt="Screen Shot 2013-07-24 at 7.10.39 PM"></a></p>
<p>Whoohoo**! **You should now see your photos populating the **UICollectionView. Congratulations! </p>
<p>While, this is definitely cool, you might now be wondering “how do I select a photo?”.  Great question, and here is the solution.</p>
<h3 id="2-selecting-photos">2. Selecting Photos</h3>
<p>Now that you have all of the groundwork in place, selecting photos from the collection could not be easier.  Open up <strong>ViewController.m</strong> and replace the **collectionView:didSelectItemAtIndexPath **method with the following code:</p>
<table>
<thead>
<tr>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
</tr>
</tbody>
</table>
<pre tabindex="0"><code>- (void) collectionView:(UICollectionView \*)collectionView didSelectItemAtIndexPath:(NSIndexPath \*)indexPath
{
    ALAsset \*asset = self.assets[indexPath.row];
    ALAssetRepresentation \*defaultRep = [asset defaultRepresentation];
    UIImage \*image = [UIImage imageWithCGImage:[defaultRep fullScreenImage] scale:[defaultRep scale] orientation:];
    // Do something with the image
}
</code></pre><p>|</p>
<p>This will get the selected asset and convert it to a UIImage. You are now free to use the UIImage how you want. Perhaps you create a protocol for this class and make a callback to a delegate OR maybe you add this to a UINavigationController stack and push a new view controller on to the stack containing this image. The sky is the limit!</p>
<p>If you look at the Over app and back to your image gallery that you just created, you will notice something is still missing.  What if the user wants to take a photo or access other albums?  This is where Over adds a bar across the top of the interface with 2 buttons that fall back to the “default” style of fetching images if the user wants to take a photo or access a different photo album.  Let’s build this out now.</p>
<h3 id="3-building-the-interface-to-take-photos-and-access-albums">3. Building The Interface To Take Photos And Access Albums</h3>
<p>Start by setting up the <strong>IBActions</strong> for theses buttons.  Open <strong>ViewController.m</strong> and add the following empty methods:</p>
<table>
<thead>
<tr>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
</tr>
</tbody>
</table>
<pre tabindex="0"><code>#pragma mark - Actions
 
- (IBAction)takePhotoButtonTapped:(id)sender
{
 
}
 
- (IBAction)albumsButtonTapped:(id)sender
{
 
}
</code></pre><p>|</p>
<p>We don’t need to add the code yet since we still need to build the UI and hook up the <strong>IBOutlets</strong>. Now open **MainStoryboard.storyboard **and drag a **UIView **right on top of your <strong>UIView.</strong></p>
<p>One issue you might run in to here is the view will want to become a subview of the collection view.  To combat this, drag the view outside of the collection view inside the left bar so the hierarchy will look like this:</p>
<p><a href="/uploads/2013/Screen-Shot-2013-07-25-at-12.35.06-PM.png"><img src="/uploads/2013/Screen-Shot-2013-07-25-at-12.35.06-PM.png" alt="Screen Shot 2013-07-25 at 12.35.06 PM"></a></p>
<p> </p>
<p>One other “gotcha” is, you must ensure that the view is positioned <strong>below</strong> the collection view in this list, otherwise it won’t show above it on screen.</p>
<p>Now, let’s manually size and position the view as Interface Building will make things hard on us if we want to position it over our collection view.</p>
<p>Select the view and open the <strong>Size Inspector.</strong> Set the values as follows:</p>
<p><a href="/uploads/2013/Screen-Shot-2013-07-25-at-12.44.23-PM.png"><img src="/uploads/2013/Screen-Shot-2013-07-25-at-12.44.23-PM.png" alt="Screen Shot 2013-07-25 at 12.44.23 PM"></a></p>
<p> </p>
<p>Again, remember this positioning is optimized for the iPhone 5. So make sure you are testing with that simulator or you won’t see this bar.</p>
<p>After this, the bar still won’t be visible inside of Interface Builder.  We need to set the background color to black with some transparency.  Open the <strong>Attributes Inspector</strong> and click on the background color.  Then set the color to black with 80% opacity:</p>
<p><a href="http://brandontreb.com/wp-content/uploads/2013/07/Screen-Shot-2013-07-25-at-12.40.13-PM.png"><img src="/uploads/2013/Screen-Shot-2013-07-25-at-12.40.13-PM-177x300.png" alt="Screen Shot 2013-07-25 at 12.40.13 PM"></a></p>
<p> </p>
<p>You should now see the bar positioned on the screen like this:</p>
<p><a href="http://brandontreb.com/wp-content/uploads/2013/07/Screen-Shot-2013-07-25-at-12.41.54-PM.png"><img src="/uploads/2013/Screen-Shot-2013-07-25-at-12.41.54-PM-154x300.png" alt="Screen Shot 2013-07-25 at 12.41.54 PM"></a></p>
<p> </p>
<p>Now drag a **UIButton **on to the view you just created. There are a few things that must be done to style the button:</p>
<ol>
<li>Position it at 0,0</li>
<li>Set the width to 160px and the height to 70x</li>
<li>Change the type to custom</li>
<li>Change the text to “Take Photo”</li>
<li>Change the font to “Helvetica Neue Condensed Black” size 20</li>
<li>Set the text color to white</li>
</ol>
<p>When you have completed these steps, the button should look like this:</p>
<p><a href="http://brandontreb.com/wp-content/uploads/2013/07/Screen-Shot-2013-07-25-at-12.47.26-PM.png"><img src="/uploads/2013/Screen-Shot-2013-07-25-at-12.47.26-PM-300x213.png" alt="Screen Shot 2013-07-25 at 12.47.26 PM"></a></p>
<p> </p>
<p>Now, hook up the <strong>IBAction <strong>by opening the <strong>Connections Inspector</strong> and dragging from <strong>Touch Up Inside</strong> to the <strong>View Controller</strong> object and selecting t</strong>akePhotoButtonTapped:</strong></p>
<p>Finally, duplicate this button (copy and paste), rename the title to “Albums”, move it next to the “Take Photo” button and hook its <strong>Touch Up Inside</strong> to <strong>albumsButtonTapped:</strong></p>
<p>The final Interface should look like this:</p>
<p><a href="http://brandontreb.com/wp-content/uploads/2013/07/Screen-Shot-2013-07-25-at-12.51.25-PM.png"><img src="/uploads/2013/Screen-Shot-2013-07-25-at-12.51.25-PM-300x221.png" alt="Screen Shot 2013-07-25 at 12.51.25 PM"></a></p>
<p> </p>
<p>Go ahead and do a <strong>Build and Run</strong> and this stage and marvel at your interface development prowess!</p>
<h3 id="4-actually-taking-photos-and-accessing-albums">4. Actually Taking Photos And Accessing Albums</h3>
<p>The final step for this tutorial is to implement the code to bring up the camera as well as bring up the photo albums.  Let’s start with the camera.  Open <strong>ViewController.m</strong> and add the following code to the <strong>takePhotosButtonTapped:</strong> method:</p>
<table>
<thead>
<tr>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
</tr>
</tbody>
</table>
<pre tabindex="0"><code>- (IBAction)takePhotoButtonTapped:(id)sender
{
    if (([UIImagePickerController isSourceTypeAvailable:
          UIImagePickerControllerSourceTypeCamera] == NO))
        return; // 1
 
    // 2
    UIImagePickerController \*mediaUI = [[UIImagePickerController alloc] init];
    mediaUI.sourceType = UIImagePickerControllerSourceTypeCamera;
    mediaUI.allowsEditing = NO;
    mediaUI.delegate = self;
    // 3
    [self presentViewController:mediaUI animated:YES completion:nil];
}
</code></pre><p>|</p>
<ol>
<li>Makes sure that the photo library is available.  If the user declines photo access, this will be the case.</li>
<li>Create the <strong>UIImagePickerController</strong> and set its source type to <strong>UIImagePickerControllerSourceTypeCamera</strong>.  This lets the media picker know to use the camera and not the image library.</li>
<li>Finally, present the view controller modally</li>
</ol>
<p>The method to bring up the photo albums is almost identical to the method above.  Add the following code to the <strong>albumsButtonTapped:</strong> method.</p>
<table>
<thead>
<tr>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
</tr>
</tbody>
</table>
<pre tabindex="0"><code>- (IBAction)albumsButtonTapped:(id)sender
{
    if (([UIImagePickerController isSourceTypeAvailable:
          UIImagePickerControllerSourceTypePhotoLibrary] == NO))
        return;
 
    UIImagePickerController \*mediaUI = [[UIImagePickerController alloc] init];
    mediaUI.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;    
    mediaUI.allowsEditing = NO;
    mediaUI.delegate = self;
    [self presentViewController:mediaUI animated:YES completion:nil];
}
</code></pre><p>|</p>
<p>As I said before, this method is almost identical with the only difference being, we are using **UIImagePickerControllerSourceTypePhotoLibrary **to open up the photo albums.</p>
<p><strong>Build and Run</strong> and tap the “Take Photo” button. Make sure you are testing on the device at this stage or nothing will happen since the simulator doesn’t have a camera.  You can however test the “Albums” button assuming you have some photos in your photo library.</p>
<p>Now that you are able to pick a photo, you need to be able to access the photo that was selected or taken.  To do this implement the following delegate method for <strong>UIImagePickerController.</strong></p>
<table>
<thead>
<tr>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
</tr>
</tbody>
</table>
<pre tabindex="0"><code>#pragma mark - image picker delegate
 
- (void) imagePickerController:(UIImagePickerController \*)picker didFinishPickingMediaWithInfo:(NSDictionary \*)info
{
    UIImage \*image = (UIImage \*) [info objectForKey:
                                          UIImagePickerControllerOriginalImage];    
    [self dismissViewControllerAnimated:YES completion:^{
        // Do something with the image
    }];
}
</code></pre><p>|</p>
<p>This method fetches the selected (or taken) image and stores. It then dismisses the camera or photo albums allowing you to do whatever is needed with the image.</p>
<h3 id="5-next-steps">5. Next Steps</h3>
<p>By now, you should have learned how to use the **ALAssets **library to interact with a user’s photos and use them to build a custom interface. You also learned how to use a <strong>UICollectionView</strong> to display a grid of photos.</p>
<p>With this knowledge in hand, you should now be able to make much more interesting photo selection interfaces than the default one Apple has to offer.  Other apps like Google+ and Instagram both have very slick photo pickers and I hope this tutorial has your gears going thinking about other interesting photo selection interfaces.</p>
<p>You can download the source from this tutorial on <a href="https://github.com/brandontreb/OverPicker">GitHub</a></p>
<p>Feel free to leave a comment if you have any questions. Happy Hacking!</p>
<p> </p>
<p><a href="http://twitter.com/share">Tweet</a></p>

        </div>
      </li>
    
      <li class="h-entry">
		
			<h1><a href="https://brandontreb.ngrok.io/2013/08/12/iphone-programming-tutorial-creating-an-image-gallery-like-over-part-1/">iPhone Programming Tutorial: Creating An Image Gallery Like Over &amp;#8211; Part 1</a></h1>
		

        <a href="https://brandontreb.ngrok.io/2013/08/12/iphone-programming-tutorial-creating-an-image-gallery-like-over-part-1/" class="u-url"><span class="post-meta"><time class="dt-published" datetime="2013-08-12 00:00:00 -0600">Aug 12, 2013</time></span></a>

        <div class="e-content">
         	<p><a href="/uploads/2013/Screen-Shot-2013-08-09-at-8.36.42-PM.png"><img src="/uploads/2013/Screen-Shot-2013-08-09-at-8.36.42-PM.png" alt="Screen Shot 2013-08-09 at 8.36.42 PM"></a></p>
<p> </p>
<p>Recently, I have had to build an app (<a href="http://j.mp/scriptapp">download link</a>) that required the user to choose a photo from their photo library.  Rather than just throwing up a <strong>UIImagePickerController</strong> like many apps, I decided to add a little bit of style.  Being inspired by Over’s ultra simplistic (and beautiful) photo selection interface, I decided to fancy things up a bit.</p>
<p>For this tutorial, I will start with a Fresh <strong>iOS6</strong> View-Based application that uses <strong>Storyboards</strong> and <strong>ARC</strong>. Also note that I will be optimizing for the iPhone 5 resolution.  You are free to make the tweaks necessary to deploy on the iPhone 4 and 4S.</p>
<p> </p>
<p>Here is a breakdown of what we will cover in this part:</p>
<ol>
<li>Creating a <strong>UICollectionView</strong>inside of <strong>Storyboard</strong></li>
<li>Using the <strong>ALAssetsLibrary</strong> to fetch photos from the user’s <strong>Camera Roll</strong></li>
<li>Displaying the <strong>ALAssets</strong> inside of the <strong>UICollectionView</strong></li>
</ol>
<h3 id="1-preparing-the-iboutlets">1. Preparing The IBOutlets</h3>
<p>Start by opening up **ViewController.m **and replacing the <strong>@interface</strong> declaration at the top with the following code:</p>
<table>
<thead>
<tr>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
</tr>
</tbody>
</table>
<pre tabindex="0"><code>@interface ViewController ()&lt;UICollectionViewDataSource, UICollectionViewDelegate, UICollectionViewDelegateFlowLayout&gt;
@property(nonatomic, weak) IBOutlet UICollectionView \*collectionView;
@end
</code></pre><p>|</p>
<p>This will declare the **IBOutlet **needed to hook up the main <strong>UICollectionView</strong> that we will be using to display the user’s photos.  I have also set up our class to be a <strong>UICollectionViewDataSource</strong>, <strong>UICollectionViewDelegate</strong>, and <strong>UICollectionViewDelegateFlowLayout</strong>. This is necessary when interfacing with the <strong>UICollectionView.</strong></p>
<h3 id="2-setting-up-the-uicollectionview-in-storyboard">2. Setting Up The UICollectionView In Storyboard</h3>
<p>Open up **MainStoryboard.storyboard **and drag a <strong>UICollectionView</strong> on to your view ensuring that it stretches the entire screen.</p>
<p><a href="http://brandontreb.com/wp-content/uploads/2013/07/Screen-Shot-2013-07-21-at-8.44.02-PM.png"><img src="/uploads/2013/Screen-Shot-2013-07-21-at-8.44.02-PM-172x300.png" alt="Screen Shot 2013-07-21 at 8.44.02 PM"></a></p>
<p>Then, <strong>Control-Click</strong> and drag from the **UICollectionView **to your **ViewController **Object and set it as the **delegate **and <strong>datasource.</strong></p>
<p><a href="/uploads/2013/Screen-Shot-2013-07-21-at-8.41.29-PM.png"><img src="/uploads/2013/Screen-Shot-2013-07-21-at-8.41.29-PM.png" alt="Screen Shot 2013-07-21 at 8.41.29 PM"></a></p>
<p>Finally, **Control-Click **and drag from **View Controller **to <strong>Collection View</strong> and selected **collectionView **to make the **IBOutlet **connection.</p>
<p><a href="/uploads/2013/Screen-Shot-2013-07-21-at-8.45.05-PM.png"><img src="/uploads/2013/Screen-Shot-2013-07-21-at-8.45.05-PM.png" alt="Screen Shot 2013-07-21 at 8.45.05 PM"></a></p>
<p>Now, we need to give a <strong>Cell Identifier</strong> to the <strong>UICollectionViewCell</strong> so that we can reference it in code.  Click on the default cell inside of the <strong>UICollectionView</strong> and open the **Attributes Inspector. **For the <strong>Identifier</strong> type in <strong>PhotoCell.</strong> The cell might be a little tricky to see as its background color is clear, but it’s there. Simply click in the top left corner of the <strong>UICollectionView</strong>.</p>
<p><a href="http://brandontreb.com/wp-content/uploads/2013/07/Screen-Shot-2013-07-21-at-9.13.08-PM.png"><img src="/uploads/2013/Screen-Shot-2013-07-21-at-9.13.08-PM-300x67.png" alt="Screen Shot 2013-07-21 at 9.13.08 PM"></a></p>
<p>Now that the <strong>UICollectionView</strong> has been set up, it’s time to fetch the photos from the user’s photo library.</p>
<pre tabindex="0"><code>If you are using the simulator, make sure to populate the Photo Gallery with images from the web. Simply open up a browser, do a Google Image Search, and click and hold on various images. You should have an option from the menu that pops up to save the images to your camera roll.
Finally, open up the **Photos** app on the simulator to initialize the Assets Library.
</code></pre><h3 id="3-fetching-alassets-user-photos-from-the-alassets-library">3. Fetching ALAssets (user photos) From The ALAssets Library</h3>
<p>In order to interface with the user’s photo library, we must first import the **AssetsLibrary.framework **framework.  To do this, click on your project in the sidebar, select the Target, then click **Build Phases, **expand the <strong>Link Binary With Libraries</strong> section and click the **+ **button.  Do a search for **Assset **and then double click on <strong>AssetsLibrary.framework.</strong></p>
<p><a href="http://brandontreb.com/wp-content/uploads/2013/07/Screen-Shot-2013-07-21-at-8.57.37-PM.png"><img src="/uploads/2013/Screen-Shot-2013-07-21-at-8.57.37-PM-259x300.png" alt="Screen Shot 2013-07-21 at 8.57.37 PM"></a></p>
<p>It should now be added to your project and ready to use.  Now that it has been linked, we must import it into the **ViewController.m **file.  Open up **ViewController.m **and add the following import to the top of the file:</p>
<table>
<thead>
<tr>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
</tr>
</tbody>
</table>
<pre tabindex="0"><code>#import &lt;AssetsLibrary/AssetsLibrary.h&gt;
</code></pre><p>|</p>
<p>Before we can fetch the user’s photos, we need to set up an <strong>NSArray</strong> to put them in.  Add the following line within the **@interface **declaration at the top.</p>
<table>
<thead>
<tr>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
</tr>
</tbody>
</table>
<pre tabindex="0"><code>@property(nonatomic, strong) NSArray \*assets;
</code></pre><p>|</p>
<p>Now, add the following method to your class:</p>
<table>
<thead>
<tr>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
</tr>
</tbody>
</table>
<pre tabindex="0"><code>+ (ALAssetsLibrary \*)defaultAssetsLibrary
{
    static dispatch_once_t pred = ;
    static ALAssetsLibrary \*library = nil;
    dispatch_once(&amp;pred, ^{
        library = [[ALAssetsLibrary alloc] init];
    });
    return library;
}
</code></pre><p>|</p>
<p>This is a static method that creates a static instance to the <strong>ALAssetsLibrary</strong>.  The reason this is needed is, when we enumerate the <strong>ALAssets</strong> in the next method, it seems that the assets get released immediately and otherwise wouldn’t be able to be used in the rest of the application. I will explain this a little more in a moment.</p>
<p>Head over to <strong>viewDidLoad</strong> and add the following code:</p>
<table>
<thead>
<tr>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
</tr>
</tbody>
</table>
<pre tabindex="0"><code>- (void)viewDidLoad
{
    [super viewDidLoad];
 
    _assets = [@[] mutableCopy];
    __block NSMutableArray \*tmpAssets = [@[] mutableCopy];
    // 1
    ALAssetsLibrary \*assetsLibrary = [ViewController defaultAssetsLibrary];
    // 2
    [assetsLibrary enumerateGroupsWithTypes:ALAssetsGroupAll usingBlock:^(ALAssetsGroup \*group, BOOL \*stop) {
        [group enumerateAssetsUsingBlock:^(ALAsset \*result, NSUInteger index, BOOL \*stop) {
            if(result)
            {
                // 3
                [tmpAssets addObject:result];
            }
        }];
 
        // 4
        //NSSortDescriptor \*sort = [NSSortDescriptor sortDescriptorWithKey:@&#34;date&#34; ascending:NO];
        //self.assets = [tmpAssets sortedArrayUsingDescriptors:@[sort]];
        self.assets = tmpAssets;
 
        // 5
        [self.collectionView reloadData];
    } failureBlock:^(NSError \*error) {
        NSLog(@&#34;Error loading images %@&#34;, error);
    }];
}
</code></pre><p>|</p>
<ol>
<li>Grab our static instance of the <strong>ALAssetsLibrary</strong></li>
<li>Enumerate through all of the **ALAssets **(photos) in the user’s <strong>Asset Groups</strong> (Folders)</li>
<li>Enumerate each folder and add it’s **ALAssets **to the temporary array</li>
<li>Sort the assets list by date (this won’t work yet, but I will show you how to fix later). For now this code is commented out and the Assets will be sorted however they come out.</li>
<li>Reload the <strong>UICollectionView</strong> (this won’t work yet as we haven’t set up the delegate methods)</li>
</ol>
<p>Now that we have an <strong>NSArray</strong> populated with <strong>ALAssets</strong>, let’s set up the **delegate **methods for the <strong>UICollectionView</strong> in order to populate it with data.</p>
<h3 id="4-populating-the-uicollectionview-with-data">4. Populating the UICollectionView With Data</h3>
<p>A <strong>UICollectionView</strong> functions much like a **UITableView **having delegate and datasource methods.  Add the following methods to your <strong>ViewController</strong> class to populate the view.</p>
<table>
<thead>
<tr>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
</tr>
</tbody>
</table>
<pre tabindex="0"><code>#pragma mark - collection view data source
 
- (NSInteger) collectionView:(UICollectionView \*)collectionView numberOfItemsInSection:(NSInteger)section
{
    return self.assets.count;
}
 
- (UICollectionViewCell \*) collectionView:(UICollectionView \*)collectionView cellForItemAtIndexPath:(NSIndexPath \*)indexPath
{
    UICollectionViewCell \*cell = (UICollectionViewCell \*)[collectionView dequeueReusableCellWithReuseIdentifier:@&#34;PhotoCell&#34; forIndexPath:indexPath];
 
    ALAsset \*asset = self.assets[indexPath.row];
    //cell.asset = asset;
    cell.backgroundColor = [UIColor redColor];
 
    return cell;
}
 
- (CGFloat) collectionView:(UICollectionView \*)collectionView layout:(UICollectionViewLayout \*)collectionViewLayout minimumLineSpacingForSectionAtIndex:(NSInteger)section
{
    return 4;
}
 
- (CGFloat) collectionView:(UICollectionView \*)collectionView layout:(UICollectionViewLayout \*)collectionViewLayout minimumInteritemSpacingForSectionAtIndex:(NSInteger)section
{
    return 1;
}
</code></pre><p>|</p>
<p>This code should be fairly straight forward if you have ever worked with a <strong>UITableView.</strong>  The only lines to note are where ‘cell.asset = asset’ is commented out and we set the cell’s background color to red.  We will uncomment that line when we create a custom cell to display the image (for now it won’t).  I have also set the background color to red so that you can see that the number of cells is actually corresponding to the number of photos in the camera roll.</p>
<p><strong>Build and Run!</strong></p>
<p>Let’s take a break to do a build and run to see what happens.  If you have hooked everything up correctly, you should see a black screen with red squares on it with a count equalling the number of photos in the user’s library.</p>
<p><a href="http://brandontreb.com/wp-content/uploads/2013/07/Screen-Shot-2013-07-21-at-9.26.07-PM.png"><img src="/uploads/2013/Screen-Shot-2013-07-21-at-9.26.07-PM-184x300.png" alt="Screen Shot 2013-07-21 at 9.26.07 PM"></a></p>
<p>Not too exciting, however it shows that we are displaying a number of cells corresponding to the number of photos in the user’s asset library.  At least it’s showing that you have done something.  The next step is to create a custom <strong>UICollectionViewCell</strong> that actually displays the photos, which we will do next time.</p>
<h3 id="5-next-time">5. Next Time</h3>
<p>That’s all for today.  In a ploy to get you to come back to my site (and <a href="http://feeds.feedburner.com/brandontreb">subscribe to my RSS feed</a>), I have chosen to break this post up into two parts.</p>
<p>Luckily for you, I wrote the above message a while ago. Click the link below to go to part 2!</p>
<p><a href="http://brandontreb.com/iphone-programming-tutorial-creating-an-image-gallery-like-over-part-2">iPhone Programming Tutorial: Creating An Image Gallery Like Over – Part 2</a></p>
<p>Stay tuned!</p>
<p><a href="http://twitter.com/share">Tweet</a></p>

        </div>
      </li>
    
  </ul>

  <p class="rss-subscribe">subscribe <a href="https://brandontreb.ngrok.io/feed.xml">via RSS</a></p>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-3">
        <p class="text"></p>
      </div>
    </div>

  </div>

</footer>

    
    
    
  </body>

</html>
